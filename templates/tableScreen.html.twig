<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Backend Test{% endblock %}</title>
    {% block stylesheets %}
    {#{{ encore_entry_link_tags('app') }}#}
    {% endblock %}

    {% block javascripts %}
    {#{{ encore_entry_script_tags('app') }}#}
    {% endblock %}
</head>

<body>
    <h1>Hello ReportController</h1>

    <form action="/" method="POST" style="margin: 15px;">
        <div style="margin: 20px 0;">
            <label style="display: block;" for="account" style="font-weight: 200; font-size: 14px;">Please enter the Account ID you'd like to display</label>
            <input type="text" placeholder="Account ID" name="account" style="background-color: #fff; border: none; border-bottom: solid 1px #333; font-size: 18px; padding: 5px 10px">
        </div>

        <div class="btn_container">
            <input type="submit" id="btn" class="boton" name="submit1" value="GET DATA" style="border: none; border-radius: 3px; background-color: #26A69A; padding: 5px 15px; box-shadow: .5px .5px 3px #000; margin-right: 10px; font-weight: 400; cursor:pointer;">
            <input type="submit" id="btn" class="boton" name="submit2" value="SHOW ALL" style="border: none; border-radius: 3px; background-color: #26A69A; padding: 5px 15px; box-shadow: .5px .5px 3px #000; font-weight: 400; cursor:pointer;">
        </div>
    </form>

    <div>
        <p style="font-weight: 400; margin: 10px 0 2px 5px">Aggregated performance for all <span style="font-weight: 600;">Active</span> accounts listed below</p>
        <table style="width:100%; margin: 0 auto; border-top: solid 1px #444;">
            {# Even if we donÂ´t have data, the header of table will appear #}
            <tr>
                <th>Account Name</th>
                <th>Account ID</th>
                <th>Spend</th>
                <th>Clicks</th>
                <th>Impressions</th>
                <th>Cost per Click</th>
            </tr>


            {% if error %}
            <tr style="width: 100%; position: absolute;">
                <td style="color: red; font-size: 2.3em; text-align: center; width: 100%; position: relative; right: -8em; top: 2em;">No data available for the supplied Account Id</td>
            </tr>
            {% else %}

            {# whit this double loop is created a row in the table for each metric attached to the accountId #}
            {% for data in collection %}

            {% for metric in data.Metrics %}
            <tr>
                <td style="text-align: center;">{{data.accountName}}</td>
                <td style="text-align: center;">{{data.accountId}}</td>
                <td style="text-align: center;">{{metric.spend}}</td>
                <td style="text-align: center;">{{metric.clicks}}</td>
                <td style="text-align: center;">{{metric.impressions}}</td>
                <td style="text-align: center;">{{metric.costPerClick}}</td>
            </tr>
            {% endfor %}

            {% endfor %}
            {% endif %}
        </table>
    </div>
</body>

</html>